{"ast":null,"code":"var _jsxFileName = \"/Users/yesha.ailani/OneDrive - ServiceNow/FALL19/webdev/Assignment13/src/Products.js\";\nimport React, { Component } from 'react';\nimport Filters from './Filters';\nimport ProductTable from './ProductTable';\nimport ProductForm from './ProductForm';\nlet PRODUCTS = {};\n\nclass Products extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: '',\n      products: PRODUCTS\n    };\n    this.handleFilter = this.handleFilter.bind(this);\n    this.handleDestroy = this.handleDestroy.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.populateForm = this.populateForm.bind(this);\n    this.child = React.createRef();\n  }\n\n  componentDidMount() {\n    fetch(\"/product/get\").then(data => data.json()).then(data => this.setState({\n      products: data\n    }));\n  }\n\n  handleFilter(filterInput) {\n    this.setState(filterInput);\n  }\n\n  handleSave(product) {\n    product.productid = new Date().getTime();\n    product.instock = true;\n    this.setState(prevState => {\n      let products = prevState.products;\n      products[product.productid] = product;\n      return {\n        products\n      };\n    });\n    var data = {\n      'product': product,\n      'id': product.productid\n    };\n    fetch('/product/create', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(response => {\n      console.log(response);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  handleDestroy(productId) {\n    this.setState(prevState => {\n      let products = prevState.products;\n      delete products[productId];\n      return {\n        products\n      };\n    });\n    fetch(\"/product/delete/\".concat(productId), {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      console.log(response);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  populateForm(productId) {\n    console.log(\"Update this \" + productId);\n    let productToUpdate = this.state.products[productId];\n    this.child.current.fillForm(productToUpdate);\n  }\n\n  handleUpdate(updatedProduct) {\n    console.log(\"Updated\");\n    console.log(updatedProduct);\n    this.setState(prevState => {\n      let products = prevState.products;\n      products[updatedProduct.productid] = updatedProduct;\n      return {\n        products\n      };\n    });\n    var productId = updatedProduct.productid;\n    var data = {\n      'product': updatedProduct,\n      'id': productId\n    };\n    fetch(\"/product/update/\".concat(productId), {\n      method: 'PUT',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(response => {\n      console.log(response);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"My Inventory\"), React.createElement(Filters, {\n      onFilter: this.handleFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(ProductTable, {\n      products: this.state.products,\n      filterText: this.state.filterText,\n      onDestroy: this.handleDestroy,\n      onModify: this.populateForm,\n      onUpdate: this.handleUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(ProductForm, {\n      onUpdate: this.handleUpdate,\n      onSave: this.handleSave,\n      ref: this.child,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Products;","map":{"version":3,"sources":["/Users/yesha.ailani/OneDrive - ServiceNow/FALL19/webdev/Assignment13/src/Products.js"],"names":["React","Component","Filters","ProductTable","ProductForm","PRODUCTS","Products","constructor","props","state","filterText","products","handleFilter","bind","handleDestroy","handleSave","handleUpdate","populateForm","child","createRef","componentDidMount","fetch","then","data","json","setState","filterInput","product","productid","Date","getTime","instock","prevState","method","headers","Accept","body","JSON","stringify","response","console","log","catch","error","productId","productToUpdate","current","fillForm","updatedProduct","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Filters from './Filters'\nimport ProductTable from './ProductTable'\nimport ProductForm from './ProductForm'\n\nlet PRODUCTS = {};\n\nclass Products extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            filterText: '',\n            products: PRODUCTS\n        }\n        this.handleFilter = this.handleFilter.bind(this)\n        this.handleDestroy = this.handleDestroy.bind(this)\n        this.handleSave = this.handleSave.bind(this)\n        this.handleUpdate = this.handleUpdate.bind(this)\n        this.populateForm = this.populateForm.bind(this)\n        this.child = React.createRef();\n    }\n    componentDidMount(){\n        fetch(`/product/get`)\n        .then(data => data.json())\n        .then(data => this.setState({products:data}))\n    }\n\n    handleFilter(filterInput) {\n        this.setState(filterInput)\n    }\n\n    handleSave(product) {\n\n        product.productid = new Date().getTime()\n        product.instock = true;\n        this.setState((prevState) => {\n            let products = prevState.products\n            products[product.productid] = product\n            return { products }\n        })\n\n        var data = {'product' : product, 'id': product.productid}\n        fetch('/product/create',{\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                        'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n        }).then(response => {\n            console.log(response)\n        })\n        .catch(error =>{\n            console.log(error)\n        })\n    }\n\n    handleDestroy(productId) {\n\n        this.setState((prevState) => {\n            let products = prevState.products\n            delete products[productId]\n            return { products }\n        });\n\n\n        fetch(`/product/delete/${productId}`,{\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                        'Content-Type': 'application/json',\n            }\n        }).then(response => {\n            console.log(response)\n        })\n        .catch(error =>{\n            console.log(error)\n        })\n    }\n\n    populateForm(productId) {\n        console.log(\"Update this \"+productId)\n        let productToUpdate = this.state.products[productId]\n        this.child.current.fillForm(productToUpdate);\n    }\n\n    handleUpdate(updatedProduct) {\n        console.log(\"Updated\")\n        console.log(updatedProduct)\n        this.setState((prevState) => {\n            let products = prevState.products\n            products[updatedProduct.productid] = updatedProduct\n            return { products }\n        });\n\n        var productId = updatedProduct.productid;\n        var data = {'product' : updatedProduct, 'id': productId}\n        fetch(`/product/update/${productId}`,{\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                        'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data)\n        }).then(response => {\n            console.log(response)\n        })\n        .catch(error =>{\n            console.log(error)\n        })\n    }\n\n    render () {\n        return (\n            <div>\n                <h1>My Inventory</h1>\n                <Filters \n                    onFilter={this.handleFilter}></Filters>\n                <ProductTable \n                    products={this.state.products}\n                    filterText={this.state.filterText}\n                    onDestroy={this.handleDestroy}\n                    onModify={this.populateForm}\n                    onUpdate={this.handleUpdate}>\n\n                </ProductTable>\n                <ProductForm\n                    onUpdate={this.handleUpdate}\n                    onSave={this.handleSave}\n                    ref={this.child}></ProductForm>\n            </div>\n        )\n    }\n}\n\nexport default Products"]},"metadata":{},"sourceType":"module"}